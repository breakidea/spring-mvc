<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Lotus by mycoin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Lotus</h1>
      <h2 class="project-tagline">Yet another spring-mvc demo project with better structure!</h2>
      <a href="https://github.com/mycoin/lotus" class="btn">View on GitHub</a>
      <a href="https://github.com/mycoin/lotus/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/mycoin/lotus/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="lotus" class="anchor" href="#lotus" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>lotus</h1>

<p><a href="https://travis-ci.org/mycoin/spring-mvc"><img src="https://travis-ci.org/mycoin/spring-mvc.svg?branch=master" alt="Build Status"></a> This project will allow you to start off on the good foot with spring MVC. In this showcase you'll see the following features in action:</p>

<ul>
<li>Pure maven dependencies</li>
<li>Embedded Jetty</li>
<li>Mapping Requests</li>
<li>Message Converters</li>
<li>Message Source</li>
<li>Rendering Layout Views</li>
<li>Exception Handling</li>
</ul>

<h3>
<a id="get-start" class="anchor" href="#get-start" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Get start</h3>

<hr>

<p>Import the mysql script <code>lotus.web/db.sql</code> , modify the db config in <code>applicationContext-db.xml</code>~</p>

<p>Clone the repository and:</p>

<div class="highlight highlight-source-shell"><pre>mvn -U clean install -DdownloadSources=<span class="pl-c1">true</span> -Dmaven.<span class="pl-c1">test</span>.skip=<span class="pl-c1">true</span>
<span class="pl-c1">cd</span> lotus.web <span class="pl-k">&amp;&amp;</span> mvn jetty:run</pre></div>

<p>or</p>

<p>Import the project as a maven project into your IDE,  Run the class <code>net.breakidea.web.Main</code>
then open <a href="http://127.0.0.1:8080/index.html">http://127.0.0.1:8080/index.html</a></p>

<h3>
<a id="overview" class="anchor" href="#overview" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Overview</h3>

<hr>

<p>This is an application to demo the implementation of a REST API.</p>

<blockquote>
<p>BTW: XML responses is not supported.</p>
</blockquote>

<p>A better project structure is required:</p>

<ul>
<li>
<code>lotus.web</code> the webapp contains the portal project.</li>
<li>
<code>lotus.api</code> api module, </li>
<li>
<code>lotus.public</code> front  page, based on <code>webpack</code> + <code>Vue</code>.</li>
<li>
<code>lotus.common</code> config and application support, important config.</li>
</ul>

<h5>
<a id="view" class="anchor" href="#view" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>View</h5>

<p>The <code>Layout</code> support. The velocity resource paths are:</p>

<ul>
<li>
<code>/WEB-INF/views/</code> The primary template path</li>
<li>
<code>/WEB-INF/common/</code> velocity code snippets</li>
<li>
<code>~/output/</code> static external templates from SVN ? FTP or other services, At the same time, you can config it at <code>app:global.properties</code>
</li>
</ul>

<p>Write your awesome template that assigned by the Controller in <code>/WEB-INF/views/</code> folder. </p>

<p>Common modules such as header or footer locate in <code>/WEB-INF/common/</code>, then use <code>context.render(name, data)</code> to import it.</p>

<p>Templates that frequently modified will be managed by other service, then sync then to <code>~/output/</code> folder~</p>

<p>For context, the default attributes are:</p>

<ul>
<li>
<code>application</code> the <code>WebApplicationContext</code> instance</li>
<li>
<code>request</code> the current <code>HttpServletRequest</code>
</li>
<li>
<code>response</code> the current <code>HttpServletResponse</code>
</li>
<li>
<code>page</code> the current context helper,  <code>net.breakidea.common.core.ContextHolder</code>
</li>
<li>
<code>context</code> the context it's self</li>
<li>
<code>util</code> tool, static class for <code>net.breakidea.common.web.view.support.Utils</code>
</li>
</ul>

<blockquote>
<p>see <a href="https://github.com/mycoin/lotus/blob/feature/spring/lotus.common/src/main/java/net/breakidea/common/web/view/support/ContextHolder.java">@ContextHolder</a> for detail</p>
</blockquote>

<h5>
<a id="macro" class="anchor" href="#macro" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>macro</h5>

<p>Lots of macros , such as <code>block</code> ,  <code>extends</code> , <code>showContent</code> , <code>showInet</code> , <code>showMessage</code>  and so on. <a href="https://github.com/mycoin/lotus/blob/master/lotus.common/src/main/resources/modules/global.vm">click here</a> for details.</p>

<h5>
<a id="message-and-url" class="anchor" href="#message-and-url" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>message and url</h5>

<p>Use <code>MessageSource</code> to manage texts, message and config. see file <code>applicationContext.xml</code></p>

<ul>
<li>global message and important config <code>classpath:global.properties</code>
</li>
<li>application base url (with domain and <code>/</code> ) <code>system.server.base</code>  e.g <a href="http://www.baidu.com/">http://www.baidu.com/</a>
</li>
<li>CDN style resource <code>system.server.static</code>  e.g <a href="https://astyle.alicdn.com/1.0.0/">https://astyle.alicdn.com/1.0.0/</a> , see more <a href="https://github.com/mycoin/lotus/blob/master/lotus.common/src/main/resources/modules/global.vm#L126">at here</a> </li>
</ul>

<h3>
<a id="mainjava" class="anchor" href="#mainjava" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Main.java</h3>

<p>This is the class that runs an embedded Jetty server with the servlet. </p>

<hr>

<p>FreeBSD License</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/mycoin/lotus">Lotus</a> is maintained by <a href="https://github.com/mycoin">mycoin</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
