<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="public/lib.css" />
</head>
<body>

<h2>测试用例</h2>
<div class="col">
    <ul>
        <li data-task="x-search">
            <i>1</i>
            <a class="link normal" href="i/search/杭州天气" target="_blank">@RequestParam()</a>
        </li>
        <li data-task="x-matches">
            <i>2</i>
            <a class="link normal" href="i/security" target="_blank">security</a>
        </li>
        <li data-task="x-matches">
            <i>2</i>
            <a class="link normal" href="i/security" target="_blank">security</a>
        </li>
    </ul>
</div>


<script type="text/javascript" src="public/lib.js"></script>
<script type="text/javascript">
var task = {
    'x-search': {
        dataType: 'json',
        method: 'post'
    }
};
jQuery('li').each(function() {
    var el = jQuery(this);
    var type = el.data('task');
    var link = jQuery('.link', el);

    if (link[0]) {
        var config = task[type];
        var opt = jQuery.extend(true, {
            dataType: 'html',
            data: {
                app: '百度'
            }
        }, config);
        jQuery.ajax(link[0].href, opt).always(function(data, _, xhr) {
            if (data.status == 0) {
                el.append('<span class="ok">' + (xhr.responseText) + '</span>');
            } else {
                el.append('<span class="error">' + (data.statusInfo || '未知异常') + '</span>');
            }
        });
    }
});
</script>
</body>
</html>